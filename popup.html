<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>ATOM</title>
    <link rel="stylesheet" href="ui_shared.css">
    <style>
        body {
            width: 360px;
            padding: 24px;
            box-sizing: border-box;
            overflow: hidden;
            margin: 0 auto;
        }

        /* --- ORB LOGO ANIMATION (WEB MATCHED) --- */
        .orb-container {
            position: relative;
            width: 80px;
            height: 80px;
            margin: 0 auto 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .orb-core {
            width: 46px;
            height: 46px;
            /* Web Gradient: from-[#10B981] via-[#059669] to-[#047857] */
            background: linear-gradient(135deg, #10B981 0%, #059669 50%, #047857 100%);
            border-radius: 50%;
            filter: blur(8px);
            /* Adjusted for smaller size */
            opacity: 1;
            box-shadow: 0 0 30px rgba(16, 185, 129, 0.6);
            animation: pulse-core 4s ease-in-out infinite;
        }

        .orb-ring {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 1px solid rgba(16, 185, 129, 0.3);
            box-shadow: 0 0 20px rgba(16, 185, 129, 0.4);
            animation: float 6s ease-in-out infinite;
        }

        @keyframes pulse-core {

            0%,
            100% {
                transform: scale(0.9);
                opacity: 0.6;
            }

            50% {
                transform: scale(1.1);
                opacity: 1;
            }
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-5px);
            }
        }

        /* --- HEADINGS --- */
        .header {
            text-align: center;
            margin-bottom: 24px;
        }

        h2 {
            margin: 0;
            font-size: 20px;
            font-weight: 700;
            background: linear-gradient(to right, #fff, #a3a3a3);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .subtitle {
            font-size: 12px;
            color: #525252;
            margin-top: 4px;
        }

        .sensitivity-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            margin-top: 8px;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 500;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border);
        }

        .sensitivity-badge.gentle {
            color: #60A5FA;
            border-color: rgba(96, 165, 250, 0.3);
        }

        .sensitivity-badge.balanced {
            color: var(--primary);
            border-color: rgba(16, 185, 129, 0.3);
        }

        .sensitivity-badge.strict {
            color: #FBBF24;
            border-color: rgba(251, 191, 36, 0.3);
        }

        .sensitivity-badge .dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: currentColor;
        }

        /* --- SAFE ZONE (Redesigned) --- */
        .safe-zone-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.03) 0%, rgba(255, 255, 255, 0.01) 100%);
            border-bottom: 1px solid var(--border);
            border-top: 1px solid var(--border);
            padding: 20px 0;
            margin-bottom: 24px;
            text-align: center;
        }

        .domain-row {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-bottom: 12px;
        }

        .domain-name {
            font-size: 16px;
            font-weight: 500;
            color: var(--foreground);
            letter-spacing: 0.5px;
        }

        .status-indicator {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: #525252;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
        }

        .status-indicator.active {
            background: var(--primary);
            box-shadow: 0 0 8px var(--primary);
        }

        .btn-toggle-status {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--muted);
            font-size: 11px;
            padding: 6px 16px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        .btn-toggle-status:hover {
            border-color: var(--primary);
            color: var(--primary);
            background: rgba(16, 185, 129, 0.05);
        }

        .btn-toggle-status.active {
            border-color: var(--primary);
            color: var(--primary);
            background: rgba(16, 185, 129, 0.1);
        }

        .status-subtext {
            font-size: 11px;
            color: var(--muted);
            margin-top: 8px;
            font-weight: 500;
        }

        /* --- MENU GRID (Text Only) --- */
        .menu-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 24px;
        }

        .action-card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            flex-direction: column;
            /* Stack icon and text */
            align-items: center;
            justify-content: center;
            height: auto;
            /* Let content dictate height + padding */
            min-height: 90px;
        }

        .action-card:hover {
            border-color: var(--primary);
            background: rgba(16, 185, 129, 0.05);
            transform: translateY(-2px);
        }

        .action-card .icon {
            color: var(--primary);
            margin-bottom: 8px;
            display: flex;
        }

        .action-card .label {
            font-size: 13px;
            font-weight: 500;
            color: var(--foreground);
        }


        /* --- FOOTER --- */
        .footer {
            margin-top: 20px;
            display: flex;
            justify-content: center;
            gap: 16px;
            padding-top: 16px;
            border-top: 1px solid var(--border);
        }

        .footer-link {
            background: none;
            border: none;
            color: #a3a3a3;
            font-size: 12px;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 8px;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            opacity: 1;
        }

        .footer-link:hover {
            color: var(--primary);
            background: rgba(16, 185, 129, 0.05);
            opacity: 1;
        }
    </style>
</head>

<body>
    <div class="header-controls">
        <button class="icon-btn" id="btn-theme-toggle" title="Toggle Theme">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z" />
            </svg>
        </button>
        <button class="icon-btn" id="btn-website" title="Visit Website">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10" />
                <path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20" />
                <path d="M2 12h20" />
            </svg>
        </button>
    </div>

    <div class="orb-container">
        <div class="orb-ring"></div>
        <div class="orb-core"></div>
    </div>

    <div class="header">
        <h2 data-i18n="popup_title">ATOM</h2>
        <div class="subtitle">Intelligent Attention Compass</div>
        <div id="sensitivity-badge" class="sensitivity-badge">
            <span class="dot"></span>
            <span id="sensitivity-label">Loading...</span>
        </div>
    </div>

    <!-- Update Banner (hidden by default) -->
    <div id="update-banner"
        style="display: none; background: linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(5, 150, 105, 0.1) 100%); border: 1px solid var(--primary); border-radius: 12px; padding: 12px; margin-bottom: 16px; cursor: pointer;">
        <div style="display: flex; align-items: flex-start; gap: 10px;">
            <span style="font-size: 20px;">ðŸŽ‰</span>
            <div>
                <div style="font-size: 13px; font-weight: 600; color: var(--primary); margin-bottom: 4px;"
                    data-i18n="update_title">ATOM is on Chrome Store!</div>
                <div style="font-size: 11px; color: var(--muted); line-height: 1.4;" data-i18n="update_desc">Click here
                    to install the official version for automatic updates.</div>
            </div>
        </div>
    </div>

    <!-- Current Site Status (Redesigned) -->
    <div class="safe-zone-card">
        <div class="domain-row">
            <span class="domain-name" id="current-domain">Checking...</span>
            <div class="status-indicator" id="site-status"></div>
        </div>
        <button id="btn-toggle-safe" class="btn-toggle-status" data-i18n="pop_loading">
            Loading...
        </button>
        <div id="safe-zone-status" class="status-subtext">Checking...</div>
    </div>

    <!-- Actions -->
    <div class="menu-grid">
        <div id="btn-journal" class="action-card">
            <span class="icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z" />
                    <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z" />
                </svg>
            </span>
            <span class="label" data-i18n="popup_btn_journal">Nháº­t KÃ½</span>
        </div>

        <div id="btn-open-settings" class="action-card">
            <span class="icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                    <path
                        d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.1a2 2 0 0 1-1-1.72v-.51a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z" />
                    <circle cx="12" cy="12" r="3" />
                </svg>
            </span>
            <span class="label" data-i18n="popup_btn_settings">CÃ i Ä‘áº·t</span>
        </div>
    </div>

    <div class="footer">
        <button id="btn-export" class="footer-link" title="Export Data">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                style="margin-right: 6px;">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                <polyline points="7 10 12 15 17 10" />
                <line x1="12" x2="12" y1="15" y2="3" />
            </svg>
            <span data-i18n="popup_btn_export">Export</span>
        </button>
        <button id="btn-report-bug" class="footer-link" title="Report Bug">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                style="margin-right: 6px;">
                <path d="m8 2 1.88 1.88" />
                <path d="M14.12 3.88 16 2" />
                <path d="M9 7.13v-1a3.003 3.003 0 1 1 6 0v1" />
                <path d="M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6" />
                <path d="M12 20v-9" />
                <path d="M6.53 9C4.6 8.8 3 7.1 3 5" />
                <path d="M6 13H2" />
                <path d="M3 21c0-2.1 1.7-3.9 3.8-4" />
                <path d="M20.97 5c0 2.1-1.6 3.8-3.5 4" />
                <path d="M22 13h-4" />
                <path d="M17.2 17c2.1.1 3.8 1.9 3.8 4" />
            </svg>
            <span data-i18n="popup_btn_report_bug">Bug</span>
        </button>
        <button id="btn-clear" class="footer-link" title="Reset Data">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                style="margin-right: 6px;">
                <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8" />
                <path d="M3 3v5h5" />
            </svg>
            <span data-i18n="popup_btn_clear">Reset</span>
        </button>
    </div>

    <script src="utils_ui.js"></script>
    <script src="popup.js"></script>
</body>

</html>