<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title data-i18n="popup_title">AmoNexus</title>
    <link rel="stylesheet" href="ui_shared.css">
    <style>
        body {
            width: 340px;
            padding: 20px;
            box-sizing: border-box;
            overflow: hidden;
            margin: 0 auto;
        }

        /* --- ORB LOGO ANIMATION --- */
        .orb-container {
            position: relative;
            width: 64px;
            height: 64px;
            margin: 0 auto 16px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .orb-core {
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, #10B981 0%, #059669 50%, #047857 100%);
            border-radius: 50%;
            filter: blur(6px);
            opacity: 1;
            box-shadow: 0 0 24px rgba(16, 185, 129, 0.6);
            animation: pulse-core 4s ease-in-out infinite;
        }

        .orb-ring {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 1px solid rgba(16, 185, 129, 0.3);
            box-shadow: 0 0 16px rgba(16, 185, 129, 0.4);
            animation: float 6s ease-in-out infinite;
        }

        @keyframes pulse-core {

            0%,
            100% {
                transform: scale(0.9);
                opacity: 0.6;
            }

            50% {
                transform: scale(1.1);
                opacity: 1;
            }
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-4px);
            }
        }

        /* --- HEADER --- */
        .header {
            text-align: center;
            margin-bottom: 16px;
        }

        h2 {
            margin: 0;
            font-size: 18px;
            font-weight: 700;
            background: linear-gradient(to right, #fff, #a3a3a3);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .subtitle {
            font-size: 11px;
            color: #9ca3af;
            margin-top: 2px;
        }

        .sensitivity-badge {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            margin-top: 6px;
            padding: 3px 10px;
            border-radius: 16px;
            font-size: 10px;
            font-weight: 500;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border);
        }

        .sensitivity-badge.gentle {
            color: #60A5FA;
            border-color: rgba(96, 165, 250, 0.3);
        }

        .sensitivity-badge.balanced {
            color: var(--primary);
            border-color: rgba(16, 185, 129, 0.3);
        }

        .sensitivity-badge.strict {
            color: #FBBF24;
            border-color: rgba(251, 191, 36, 0.3);
        }

        .sensitivity-badge .dot {
            width: 5px;
            height: 5px;
            border-radius: 50%;
            background: currentColor;
        }

        /* --- SAFE ZONE CARD --- */
        .safe-zone-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.03) 0%, rgba(255, 255, 255, 0.01) 100%);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 14px;
            margin-bottom: 12px;
            text-align: center;
        }

        .domain-row {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
            margin-bottom: 10px;
        }

        .domain-name {
            font-size: 14px;
            font-weight: 500;
            color: var(--foreground);
        }

        .status-indicator {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: #525252;
        }

        .status-indicator.active {
            background: var(--primary);
            box-shadow: 0 0 6px var(--primary);
        }

        .btn-toggle-status {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--muted);
            font-size: 11px;
            padding: 6px 14px;
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }

        .btn-toggle-status:hover {
            border-color: var(--primary);
            color: var(--primary);
            background: rgba(16, 185, 129, 0.05);
        }

        .btn-toggle-status.active {
            border-color: var(--primary);
            color: var(--primary);
            background: rgba(16, 185, 129, 0.1);
        }

        .status-subtext {
            font-size: 10px;
            color: var(--muted);
            margin-top: 6px;
            font-weight: 500;
        }

        .onboarding-card {
            border: 1px solid rgba(16, 185, 129, 0.45);
            border-radius: 12px;
            padding: 12px;
            margin-bottom: 12px;
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.12) 0%, rgba(16, 185, 129, 0.05) 100%);
        }

        .onboarding-card.hidden {
            display: none;
        }

        .onboarding-title {
            font-size: 13px;
            font-weight: 700;
            color: var(--foreground);
            margin-bottom: 4px;
        }

        .onboarding-desc {
            font-size: 11px;
            color: var(--muted);
            line-height: 1.4;
            margin-bottom: 8px;
        }

        .onboarding-steps {
            display: flex;
            flex-direction: column;
            gap: 4px;
            font-size: 11px;
            color: var(--foreground);
            margin-bottom: 10px;
        }

        .onboarding-actions {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .onboarding-primary {
            flex: 1;
            padding: 9px 10px;
            font-size: 12px;
            font-weight: 600;
            border: 1px solid var(--primary);
            border-radius: 9px;
            color: var(--primary);
            background: rgba(16, 185, 129, 0.14);
            cursor: pointer;
        }

        .onboarding-primary:hover {
            background: rgba(16, 185, 129, 0.2);
        }

        .onboarding-secondary {
            padding: 9px 10px;
            font-size: 11px;
        }

        /* --- FOCUS SESSION (Collapsible) --- */
        .focus-section {
            border: 1px solid var(--border);
            border-radius: 12px;
            margin-bottom: 12px;
            overflow: hidden;
        }

        .focus-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 14px;
            cursor: pointer;
            background: var(--surface);
            transition: all 0.2s;
        }

        .focus-header:hover {
            background: rgba(16, 185, 129, 0.05);
        }

        .focus-header-left {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            font-size: 13px;
            color: var(--foreground);
        }

        .focus-header-left svg {
            color: var(--primary);
        }

        .focus-timer-badge {
            font-size: 11px;
            padding: 3px 8px;
            border-radius: 10px;
            background: rgba(16, 185, 129, 0.15);
            color: var(--primary);
            font-weight: 600;
        }

        .focus-timer-badge.off {
            background: rgba(255, 255, 255, 0.05);
            color: var(--muted);
        }

        .focus-chevron {
            transition: transform 0.2s;
            color: var(--muted);
        }

        .focus-section.open .focus-chevron {
            transform: rotate(180deg);
        }

        .focus-content {
            max-height: 0;
            overflow: hidden;
            padding: 0 14px;
            border-top: 1px solid transparent;
            background: rgba(0, 0, 0, 0.1);
            transition: max-height 0.25s ease, padding 0.25s ease, border-color 0.25s ease;
        }

        .focus-section.open .focus-content {
            max-height: 200px;
            padding: 14px;
            border-top-color: var(--border);
        }

        .focus-presets {
            display: flex;
            gap: 8px;
            justify-content: center;
            margin-bottom: 12px;
        }

        .focus-preset-btn {
            flex: 1;
            padding: 8px 0;
            border: 1px solid var(--border);
            border-radius: 10px;
            background: transparent;
            color: var(--foreground);
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .focus-preset-btn:hover {
            border-color: var(--primary);
            color: var(--primary);
            background: rgba(16, 185, 129, 0.05);
        }

        .focus-custom {
            display: flex;
            gap: 8px;
            align-items: center;
            margin-bottom: 12px;
        }

        .focus-custom input {
            flex: 1;
            padding: 8px 10px;
            border-radius: 10px;
            border: 1px solid var(--border);
            background: var(--surface);
            color: var(--foreground);
            text-align: center;
            font-size: 12px;
        }

        .focus-custom-label {
            font-size: 11px;
            color: var(--muted);
            white-space: nowrap;
        }

        .focus-actions {
            display: flex;
            gap: 8px;
            justify-content: center;
        }

        .focus-actions .btn-toggle-status {
            flex: 1;
            padding: 8px;
        }

        /* --- FOCUS REVIEW --- */
        .focus-review {
            display: none;
            margin-bottom: 12px;
            border: 1px solid var(--border);
            border-radius: 12px;
            background: var(--surface);
            overflow: hidden;
        }

        .focus-review.active {
            display: block;
        }

        .review-header {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 14px;
            border-bottom: 1px solid var(--border);
            font-size: 13px;
            font-weight: 600;
            color: var(--foreground);
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.18) 0%, rgba(5, 150, 105, 0.08) 100%);
        }

        .review-subtitle {
            font-size: 10px;
            color: var(--muted);
            margin-top: 4px;
        }

        .review-section {
            padding: 12px 14px;
            border-bottom: 1px solid var(--border);
        }

        .review-section:last-child {
            border-bottom: none;
        }

        .review-label {
            font-size: 10px;
            color: var(--muted);
            margin-bottom: 6px;
        }

        .review-title {
            font-size: 12px;
            color: var(--foreground);
            font-weight: 500;
        }

        .review-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            text-align: center;
        }

        .review-stat {
            padding: 8px 6px;
            border-radius: 8px;
            background: rgba(16, 185, 129, 0.08);
            border: 1px solid rgba(16, 185, 129, 0.15);
        }

        .review-stat-value {
            display: block;
            font-size: 14px;
            font-weight: 700;
            color: var(--primary);
        }

        .review-stat-label {
            font-size: 9px;
            color: var(--muted);
        }

        .review-question {
            font-size: 12px;
            color: var(--foreground);
            line-height: 1.4;
            margin-bottom: 8px;
        }

        .review-hint {
            font-size: 10px;
            color: var(--muted);
            margin-bottom: 8px;
        }

        .review-textarea {
            width: 100%;
            min-height: 64px;
            border-radius: 10px;
            border: 1px solid var(--border);
            background: var(--background);
            color: var(--foreground);
            padding: 8px 10px;
            font-size: 12px;
            resize: vertical;
        }

        .review-actions {
            display: flex;
            gap: 8px;
        }

        .review-actions .btn-toggle-status {
            flex: 1;
        }

        .review-feedback {
            margin-top: 10px;
            font-size: 11px;
            color: var(--muted);
            line-height: 1.4;
        }

        /* --- RETENTION STATS --- */
        .retention-card {
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 12px;
            margin-bottom: 12px;
            background: var(--surface);
        }

        .retention-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-size: 12px;
            font-weight: 600;
            color: var(--foreground);
            margin-bottom: 8px;
        }

        .retention-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 6px;
            text-align: center;
        }

        .retention-stat {
            padding: 8px 6px;
            border-radius: 10px;
            background: rgba(16, 185, 129, 0.08);
            border: 1px solid rgba(16, 185, 129, 0.15);
        }

        .retention-stat-value {
            font-size: 14px;
            font-weight: 700;
            color: var(--primary);
        }

        .retention-stat-label {
            font-size: 9px;
            color: var(--muted);
        }

        .retention-empty {
            font-size: 10px;
            color: var(--muted);
            text-align: center;
            padding: 8px;
        }

        /* --- CHAT BUTTON (Prominent) --- */
        .chat-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            width: 100%;
            padding: 14px;
            margin-bottom: 12px;
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(5, 150, 105, 0.1) 100%);
            border: 1px solid var(--primary);
            border-radius: 12px;
            color: var(--primary);
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .chat-btn:hover {
            background: rgba(16, 185, 129, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(16, 185, 129, 0.25);
        }

        .chat-btn svg {
            flex-shrink: 0;
        }

        /* --- MENU GRID --- */
        .menu-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-bottom: 12px;
        }

        .action-card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 12px 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 70px;
        }

        .action-card:hover {
            border-color: var(--primary);
            background: rgba(16, 185, 129, 0.05);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.15);
        }

        .action-card .icon {
            color: var(--primary);
            margin-bottom: 6px;
            display: flex;
        }

        .action-card .label {
            font-size: 11px;
            font-weight: 500;
            color: var(--foreground);
        }

        /* --- FOOTER --- */
        .footer {
            display: flex;
            justify-content: center;
            gap: 6px;
            padding-top: 12px;
            border-top: 1px solid var(--border);
        }

        .footer-link {
            background: none;
            border: none;
            color: #737373;
            font-size: 11px;
            cursor: pointer;
            padding: 6px 10px;
            border-radius: 6px;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .footer-link:hover {
            color: var(--primary);
            background: rgba(16, 185, 129, 0.05);
        }

        /* Update Banner */
        .update-banner {
            display: none;
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(5, 150, 105, 0.1) 100%);
            border: 1px solid var(--primary);
            border-radius: 10px;
            padding: 10px 12px;
            margin-bottom: 12px;
            cursor: pointer;
        }

        /* Light Mode Adjustments */
        body.light-mode .safe-zone-card {
            background: rgba(0, 0, 0, 0.02);
            border-color: var(--border);
        }

        body.light-mode .focus-section {
            border-color: var(--border);
        }

        body.light-mode .focus-header {
            background: rgba(0, 0, 0, 0.02);
        }

        body.light-mode .focus-content {
            background: rgba(0, 0, 0, 0.02);
        }

        body.light-mode .action-card {
            background: var(--surface);
            border-color: var(--border);
        }

        body.light-mode .chat-btn {
            background: linear-gradient(135deg, rgba(13, 148, 136, 0.1) 0%, rgba(13, 148, 136, 0.05) 100%);
        }

        body.light-mode .focus-timer-badge {
            background: rgba(13, 148, 136, 0.1);
        }

        body.light-mode .focus-timer-badge.off {
            background: rgba(0, 0, 0, 0.05);
        }

        body.light-mode h2 {
            background: linear-gradient(to right, #111827, #4B5563);
            -webkit-background-clip: text;
            background-clip: text;
        }

        .update-banner-content {
            display: flex;
            align-items: flex-start;
            gap: 8px;
        }

        .update-banner-icon {
            font-size: 18px;
        }

        .update-banner-title {
            font-size: 12px;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 2px;
        }

        .update-banner-desc {
            font-size: 10px;
            color: var(--muted);
            line-height: 1.4;
        }
    </style>
</head>

<body>
    <div class="header-controls">
        <button class="icon-btn" id="btn-theme-toggle" data-i18n-title="opt_theme_toggle_title" title="Toggle Theme">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z" />
            </svg>
        </button>
        <button class="icon-btn" id="btn-website" data-i18n-title="popup_visit_website" title="Visit Website">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10" />
                <path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20" />
                <path d="M2 12h20" />
            </svg>
        </button>
    </div>

    <!-- Orb Animation -->
    <div class="orb-container">
        <div class="orb-ring"></div>
        <div class="orb-core"></div>
    </div>

    <!-- Main Header -->
    <div class="header">
        <h2 data-i18n="popup_title">AmoNexus</h2>
        <div class="subtitle" data-i18n="popup_subtitle">The Neural Nexus for Your Second Brain</div>
        <div id="sensitivity-badge" class="sensitivity-badge">
            <span class="dot"></span>
            <span id="sensitivity-label" data-i18n="popup_loading">Loading...</span>
        </div>
    </div>

    <!-- Update Banner (hidden by default) -->
    <div id="update-banner" class="update-banner">
        <div class="update-banner-content">
            <span class="update-banner-icon">ðŸŽ‰</span>
            <div>
                <div class="update-banner-title" data-i18n="update_title">AmoNexus is on Chrome Store!</div>
                <div class="update-banner-desc" data-i18n="update_desc">Click here to install official version.</div>
            </div>
        </div>
    </div>

    <section id="popup-onboarding-card" class="onboarding-card hidden" role="region" aria-live="polite">
        <div class="onboarding-title" data-i18n="popup_onboarding_title">Start in 1 minute</div>
        <div class="onboarding-desc" id="popup-onboarding-desc" data-i18n="popup_onboarding_desc">
            Open the side panel and follow 3 quick steps.
        </div>
        <div class="onboarding-steps">
            <span data-i18n="popup_onboarding_step1">1) Highlight one short paragraph</span>
            <span data-i18n="popup_onboarding_step2">2) Press Summarize</span>
            <span data-i18n="popup_onboarding_step3">3) Press Save</span>
        </div>
        <div class="onboarding-actions">
            <button id="btn-onboarding-sidepanel" class="onboarding-primary" data-i18n="popup_onboarding_open_sidepanel">
                Open Side Panel
            </button>
            <button id="btn-onboarding-settings" class="btn-toggle-status onboarding-secondary" style="display:none;"
                data-i18n="popup_onboarding_open_settings">
                Open Settings
            </button>
        </div>
    </section>

    <div class="safe-zone-card">
        <div class="domain-row">
            <span class="domain-name" id="current-domain" data-i18n="popup_checking">Checking...</span>
            <div class="status-indicator" id="site-status"></div>
        </div>
        <button id="btn-toggle-safe" class="btn-toggle-status" data-i18n="pop_loading">Loading...</button>
        <div id="safe-zone-status" class="status-subtext" data-i18n="popup_checking">Checking...</div>
    </div>

    <!-- Focus Session (Collapsible) -->
    <div class="focus-section" id="focus-section">
        <div class="focus-header" id="focus-toggle">
            <div class="focus-header-left">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10" />
                    <polyline points="12 6 12 12 16 14" />
                </svg>
                <span data-i18n="popup_focus_session">Focus Session</span>
            </div>
            <div style="display: flex; align-items: center; gap: 8px;">
                <span id="focus-timer-badge" class="focus-timer-badge off">OFF</span>
                <svg class="focus-chevron" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="m6 9 6 6 6-6" />
                </svg>
            </div>
        </div>
        <div class="focus-content">
            <div class="focus-presets">
                <button class="focus-preset-btn" id="focus-preset-25">25m</button>
                <button class="focus-preset-btn" id="focus-preset-40">40m</button>
                <button class="focus-preset-btn" id="focus-preset-50">50m</button>
            </div>
            <div class="focus-custom">
                <input id="focus-work" type="number" min="5" max="120" placeholder="Custom"
                    data-i18n-placeholder="popup_focus_custom">
                <span class="focus-custom-label" data-i18n="popup_break_label">â†’ Break: <span
                        id="focus-break-preview">-</span></span>
            </div>
            <div class="focus-actions">
                <button class="btn-toggle-status active" id="focus-start" data-i18n="popup_focus_start">Start</button>
                <button class="btn-toggle-status" id="focus-stop" style="display:none;"
                    data-i18n="popup_focus_stop">Stop</button>
                <button class="btn-toggle-status" id="focus-reset" style="display:none;"
                    data-i18n="focus_btn_reset">Reset</button>
            </div>
        </div>
    </div>

    <!-- Focus Review -->
    <div class="focus-review" id="focus-review"></div>

    <!-- Retention Stats -->
    <div class="retention-card" id="retention-card">
        <div class="retention-header">
            <span data-i18n="popup_retention_title">Retention</span>
            <span id="retention-streak-label" class="subtitle"></span>
        </div>
        <div class="retention-grid" id="retention-grid">
            <div class="retention-stat">
                <div class="retention-stat-value" id="retention-due">0</div>
                <div class="retention-stat-label" data-i18n="popup_retention_due">Due</div>
            </div>
            <div class="retention-stat">
                <div class="retention-stat-value" id="retention-new">0</div>
                <div class="retention-stat-label" data-i18n="popup_retention_new">New</div>
            </div>
            <div class="retention-stat">
                <div class="retention-stat-value" id="retention-recommended">0</div>
                <div class="retention-stat-label" data-i18n="popup_retention_recommended">Today</div>
            </div>
            <div class="retention-stat">
                <div class="retention-stat-value" id="retention-streak">0</div>
                <div class="retention-stat-label" data-i18n="popup_retention_streak">Streak</div>
            </div>
        </div>
        <div class="retention-empty" id="retention-empty" style="display:none;" data-i18n="popup_retention_empty">
            No review cards yet
        </div>
    </div>

    <!-- Chat with Amo Button -->
    <button id="btn-chat-page" class="chat-btn">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" />
            <path d="M8 10h.01" />
            <path d="M12 10h.01" />
            <path d="M16 10h.01" />
        </svg>
        <span data-i18n="popup_btn_chat_page">Chat with Amo</span>
    </button>

    <!-- Actions Grid -->
    <div class="menu-grid">
        <div id="btn-journal" class="action-card">
            <span class="icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z" />
                    <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z" />
                </svg>
            </span>
            <span class="label" data-i18n="popup_btn_journal">Journal</span>
        </div>

        <div id="btn-memory" class="action-card">
            <span class="icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20" />
                    <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z" />
                    <circle cx="12" cy="10" r="2" />
                    <path d="M12 14v2" />
                </svg>
            </span>
            <span class="label" data-i18n="popup_btn_memory">Memory</span>
        </div>

        <div id="btn-open-settings" class="action-card">
            <span class="icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                    <path
                        d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.1a2 2 0 0 1-1-1.72v-.51a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z" />
                    <circle cx="12" cy="12" r="3" />
                </svg>
            </span>
            <span class="label" data-i18n="popup_btn_settings">Settings</span>
        </div>
    </div>

    <div class="footer">
        <button id="btn-debug-panel" class="footer-link" style="display:none;" title="Debug">Debug</button>
        <button id="btn-export" class="footer-link" data-i18n-title="popup_export_title" title="Export">
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                <polyline points="7 10 12 15 17 10" />
                <line x1="12" x2="12" y1="15" y2="3" />
            </svg>
            <span data-i18n="popup_btn_export">Export</span>
        </button>
        <button id="btn-report-bug" class="footer-link" data-i18n-title="popup_report_bug_title" title="Bug">
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="m8 2 1.88 1.88" />
                <path d="M14.12 3.88 16 2" />
                <path d="M9 7.13v-1a3.003 3.003 0 1 1 6 0v1" />
                <path d="M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6" />
                <path d="M12 20v-9" />
            </svg>
            <span data-i18n="popup_btn_report_bug">Bug</span>
        </button>
        <button id="btn-clear" class="footer-link" data-i18n-title="popup_reset_title" title="Reset">
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8" />
                <path d="M3 3v5h5" />
            </svg>
            <span data-i18n="popup_btn_clear">Reset</span>
        </button>
    </div>

    <script src="config/build_flags.js"></script>
    <script src="utils/console_guard.js"></script>
    <script src="utils/i18n_classic.js"></script>
    <script src="utils_ui.js"></script>
    <script src="storage/reading_session.js"></script>
    <script src="services/flashcard_deck.js"></script>
    <script src="services/spaced_repetition.js"></script>
    <script src="services/timer_integration.js"></script>
    <script src="popup.js"></script>
</body>

</html>
